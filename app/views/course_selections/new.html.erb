<% provide(:title, "New Course") %>


<h1>Start watching courses</h1>

<%= form_tag course_selections_path, class: "form-horizontal" do %>
  <fieldset>
    <legend>Choose a course</legend>
    <div class="form-group">

      <%= render 'shared/error_messages', object: @course %>
      
     <%= label_tag :course_subject, "Course Subject", 
                    class: "col-lg-2 control-label" %> 
      <div class="col-lg-10">
        <%= text_field_tag :course_subject, params[:course_subject], 
        id: "inputSubject", class: "form-control", placeholder: "e.g. COSC" %>
      </div>

     <%= label_tag :course_number, "Course Number", 
                    class: "col-lg-2 control-label" %> 
      <div class="col-lg-10">
        <%= text_field_tag :course_number, params[:course_number], 
        id: "inputNumber", class: "form-control", placeholder: "e.g. 50" %>
      </div>
      
      <% unless @course_set && @course_set.count > 1 %>
        <%= submit_tag "Add course", class: "btn btn-success" %>
      <% end %>
    </div>
  </fieldset>
<% end %>

<% if @course_set && @course_set.count > 1 %>
  <div class="alert alert-dismissable alert-warning">
    <p>
      The course you selected has multiple sections and/or labs. Please specify
      which one you'd like to watch.
    </p>
  </div>
  
  <div class="col-lg-12">
    <div class="page-header">
      <h1 id="tables">Sections / Labs</h1>
    </div>
  </div>
  

  <table class="table table-striped table-hover ">
    <thead>
      <tr>
        <th>Course</th>
        <th>Section</th>
        <th>Availability</th>
        <th>Instructor</th>
        <th>Period</th>
        <th>Enrollment</th>
        <th>Status</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @course_set.each do |course| %>
        <tr class="info">
          <td><%= course.subject %> <%= course.number %></td>
          <td><%= course.section %></td>
          <% if course.available? %>
            <td class="text-success" id="availability">Available</td>
          <% else %>
            <td class="text-danger" id="availability">Not available</td>
          <% end %>
          <td><%= course.instructor %></td>
          <td><%= course.period %></td>
          <td><%= course.enrollment %></td>
          <td>
            <% if course.status.nil? %>
              N/A
            <% else %>
              <%= course.status %>
            <% end %>  
          </td>
          <td><a href="<%= course_selection_path(course.id) %>">Select</a></td>
        </tr>    
      <% end %>
    </tbody>
  </table>
<% end %>

<%= link_to "Back to profile", user_path(current_user), class: "btn btn-default" %>

